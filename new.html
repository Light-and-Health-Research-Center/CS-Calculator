<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CS Calculator</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="js/GeneralFunctions.js"></script>
    <script src="js/lightMetricFunctions.js"></script>
    <script src="js/spectralEfficiency.js"></script>
    <script src="js/userFunctions.js"></script>
    <script src="js/sourcelist.js"></script>
    <script src="js/jp.js"></script>
    <script src="js/ansi_duv.js"></script>
    <script src="js/charts.js"></script>
    <link rel="stylesheet" type="text/css" href="css/WebCsCalculatorStyleSheet.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700&display=swap">
    <link rel="stylesheet" href="css/nav.css" />
  </head>
  <body class="h-100 mh-100">
    <!-- <div id="navbar" class="bb">
      <script>
        $('#navbar').load('navbar.html');
      </script>
    </div> -->

    <div class="w-100 text-center my-4">
      <img class="w-75" src="img/header.png"/>
    </div>

    <div class="container-fluid mt-4">
      <div class="row">
        <div class="col">
          <div class="card">
            <div class="card-header">
              <div class="container-fluid">
                <div class="row">
                  <div id="stepChange1" class="col-md-4 step-title-container active">
                    <h2 class="step-title active">
                      Sources
                    </h2>
                  </div>
                  <div id="stepChange2" class="col-md-4 step-title-container">
                    <h2 class="step-title">
                      Variables
                    </h2>
                  </div>
                  <div id="stepChange3" class="col-md-4 step-title-container">
                    <h2 class="step-title">
                      Results
                    </h2>
                  </div>
                </div>
              </div>
            </div>
            <div id="stepContent1" class="card-body d-block">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-md-7">
                    <h5 class="w-100 text-center text-lrc">Existing Sources</h5>
                    <hr class="hr-lrc"/>
                    <div class="row mb-4">
                      <div class="col-md-5">
                        <h5 class="inner-section-title">filter</h5>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend text-center">
                            <label class="input-group-text text-center" for="manufacterer"><b>Manufacturer:</b></label>
                          </div>
                          <select class="custom-select sortSource" id="manufacterer">
                            <option selected>Any</option>
                          </select>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <label class="input-group-text" for="cct"><b>CCT:</b></label>
                          </div>
                          <select class="custom-select sortSource" id="cct">
                            <option selected>Any</option>
                          </select>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <label class="input-group-text" for="lamp"><b>Lamp:</b></label>
                          </div>
                          <select class="custom-select sortSource" id="lamp">
                            <option selected>Any</option>
                          </select>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="keyword"><b>Keyword:</b></span>
                          </div>
                          <input id="searchSource" type="text" class="form-control sortSource" aria-label="Default" aria-describedby="keyword" placeholder="Search">
                        </div>
                        <div class="form-group">
                          <div class="input-group">
                            <button class="w-100 btn btn-lrc text-center" id="reset" type="button">Reset</button>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-1">
                        <h5 class="inner-section-title">></h5>
                      </div>
                      <div class="col-md-6">
                        <h5 class="inner-section-title">sources</h5>
                        <div id="names-list" class="list-group list-height">
            						</div>
                        <div id="modal-area">
            						</div>
                      </div>
                    </div>

                  </div>
                  <div class="col-md-1">
                    <div class="row">
                      <div class="col-md-12">
                        <h5 class="o-0 w-100 text-center text-lrc">or</h5>
                        <hr class="o-0 hr-lrc"/>
                        <div class="row">
                          <div class="col">
                            <h5 class="inner-section-title">or</h5>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <h5 class="w-100 text-center text-lrc">Custom Source</h5>
                    <hr class="hr-lrc" />
                    <div class="row">
                      <div id="newSourceCol" class="col-md-12">
                        <h5 class="inner-section-title">create your own</h5>
                        <form>

            							<!-- Input Source Name -->
            							<div id="userIDFormGroup" class="input-group mb-3">
            								<div class="input-group-prepend">
            									<label class="input-group-text" for="userID"><b class="m-auto">Source Name:</b></label>
            								</div>
            								<input type="text" class="form-control userSortSource userEnter" id="userID" placeholder="Unique Source Name">
            							</div>

            							<!-- Input Manufacturer -->
            							<div class="input-group mb-3">
            								<div class="input-group-prepend">
            									<label class="input-group-text" for="userMan"><b class="m-auto">Manufacturer:</b></label>
            								</div>
            								<input type="text" class="form-control userSortSource userEnter" id="userMan" placeholder="(Optional)">
            							</div>

            							<!-- Input CCT -->
            							<div class="input-group mb-3">
            								<div class="input-group-prepend">
            									<label class="input-group-text" for="userCCT"><b class="m-auto">CCT (K):</b></label>
            								</div>
            								<input type="text" class="form-control userSortSource userEnter" id="userCCT" placeholder="(Optional)">
            							</div>

            							<!-- Input Lamp Type -->
            							<div class="input-group mb-3">
            								<div class="input-group-prepend">
            									<label class="input-group-text" for="userLamp"><b class="m-auto">Lamp Type:</b></label>
            								</div>
            								<input type="text" class="form-control userSortSource userEnter" id="userLamp" placeholder="(Optional)">
            							</div>

            							<!-- Input Desc -->
            							<div class="input-group mb-3">
            								<div class="input-group-prepend">
            									<label class="input-group-text" for="userDesc"><b class="m-auto">Description:</b></label>
            								</div>
            								<textarea rows="3" class="form-control userSortSource userEnter" id="userDesc" Placeholder="(Optional)"></textarea>
            							</div>

            							<div class="text-center mb-3">
            								<h5>Spectral Power Distribution (SPD):</h5>
            							</div>

            							<div class="row">
            								<div class="col-lg-6 col-md-12">

            									<!-- Input Wavelengths -->
            									<div id="userSPDFormWavelengths" class="input-group mb-3">
            										<label class="input-group-text w-100 top-label" for="userSPDWavelengths"><b class="m-auto">Wavelengths (nm):</b></label>
            										<textarea class="form-control text-right w-100 bottom-input" rows="5" id="userSPDWavelengths" placeholder="380&#10;382&#10;384&#10;386&#10;388"></textarea>
            									</div>
            								</div>

            								<div class="col-lg-6 col-md-12">

            									<!-- Input Values -->
            									<div id="userSPDFormValues" class="input-group mb-3">
                                <label class="input-group-text w-100 top-label" for="userSPDValues"><b class="m-auto">Values</b></label>
                                <textarea class="form-control text-right w-100 bottom-input" rows="5" id="userSPDValues" placeholder="0.0020065&#10;0.0016818&#10;0.001013&#10;0.00054935&#10;0.00027727"></textarea>
            									</div>

            								</div>
            							</div>
                            <button type="button" class="btn btn-lrc disabled w-100" id="userSourceSubmit" onclick=submitUserSource()>Add to Existing Sources</button>
            						</form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="stepContent2" class="card-body d-none">
              <div class="row">
                <div class="col">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Source</th>
                        <th>Vertical Photopic Illuminance (lx)</th>
                        <th>Remove Source</th>
                      </tr>
                    </thead>
                    <tbody id="selected-sources">
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <div id="stepContent3" class="card-body d-none">
              <div class="row">
    						<div class="text-center">
    							<h4><a data-toggle="collapse" data-target="#plotHelp" style="color:Black; cursor:help;">Output Plots</a></h4>
    						</div>
    						<div id="plotHelp" class="collapse help">
    							<p style="color:gray;">
    								<i>Below are the output plots displaying information about the combined attributes of light sources that have been selected. Both the graphs and the associated legends will be modified automatically as new sources are added and illuminance values are adjusted.</i>
    							</p>
    						</div>
    						<ul class="nav nav-pills nav-justified" style="padding: 0% 2% 0% 2%;">
    						  <li class="active"><a data-toggle="pill" href="#PlotAreaSPD">Spectral Power Distribution</a></li>
    						  <li><a data-toggle="pill" href="#PlotAreaChromaticity">Chromaticity</a></li>
    						  <li><a data-toggle="pill" href="#PlotAreaCRM">Color Rendering Metrics</a></li>
    						</ul>
    					</div>

    					<div class="row tab-content">
    						<div id="PlotAreaSPD" class="tab-pane fade in active">
    							<div class="text-center">
    								<h4>Spectral Power Distribution</h4>
    							</div>
    							<canvas id="spdPlot">

    							</canvas>
    							<div id="spdLegendDiv" class="text-center" style="display: none;">
    								<h4>Legend</h4>
    								<div id="spdLegend" class="chart-legend text-left">
    								</div>
    								<p>* For the Specified Spectral Power Distribution [Spectrum, Amount]</p>
    								<p><a href="http://journals.sagepub.com/doi/abs/10.1177/1477153511430474" target="_blank">Information on the calculation of Circadian Light</a>, <a href="http://journals.sagepub.com/doi/pdf/10.1177/1477153512467607" target="_blank">Corrigendum</a></p>
    							</div>
    						</div>
    						<div id="PlotAreaChromaticity" class="tab-pane fade">
    							<div class="text-center">
    								<h4>Chromaticity</h4>
    								<canvas id="chromaticityPlot" width="100" height="100">

    								</canvas>
    								<div id="chromaticityLegendDiv" class="text-center" style="display: none;">
    									<h4>Legend</h4>
    									<div id="chromaticityLegend" class="chart-legend text-left">
    									</div>
    								</div>
    							</div>
    						</div>
    						<div id="PlotAreaCRM" class="tab-pane fade">
    							<div class="text-center">
    								<h4>Color Rendering Metrics</h4>
    								<canvas id="crmPlot">

    								</canvas>
    								<div id="crmLegendDiv" class="text-center" style="display: none;">
    									<h4>Legend</h4>
    									<div id="crmLegend" class="chart-legend text-left">
    									</div>
    								</div>
    							</div>
    						</div>
    					</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
