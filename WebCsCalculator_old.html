<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Web CS Calculator</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!-- Set the width of the page to follow the screen width of the device and set the initial zoom on the page -->
		<meta name="viewport" content="device-width, initial-scale=1"
		<!-- Load Libraries for Bootstrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<!-- Load library for Chart -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.3/Chart.js"></script>
		
		<!-- Load LRC Scripts  -->
		<script type="text/javascript" src="sourcelist.js"></script>
		<script type="text/javascript" src="GeneralAnalysisFunctions.js"></script>
		<script type="text/javascript" src="math_functions_2017_08_09.js"></script>
		
		<script type="text/javascript" src="CCT23Sep05.js"></script>
		<script type="text/javascript" src="CLA_postBerlinCorrMelanopsin_06Feb2014.js"></script>
		<script type="text/javascript" src="blackbodySpectra23Sep05.js"></script>
		<script type="text/javascript" src="CieDaySpectra23Sep05.js"></script>
		<script src="cri23Sep05.js"></script> 
		<script src="gamutArea23Sep05.js"></script>
		
		<script src="distanceFromBlackBody.js"></script> 
		<script src="Lxy23Sep05.js"></script> 
		
		<script type="text/javascript" src="onStart.js"></script>
		<script type="text/javascript" src="pageActionFunctions.js"></script>
		
		
		<!-- User Enter SPD test area -->
		<script type="text/javascript" src="userSourceFunctions.js"></script>
		<script type="text/javascript" src="userSourcePageActionFunctions.js"></script>
		
		<!-- Spectral Efficiency Function test area -->
		<script type="text/javascript" src="generateCircadianSpectralResponceForSPD.js"></script>
		<script type="text/javascript" src="fmin.js"></script>
		
		<!-- Script Test Area -->
		<script>
			
		</script>
		
		<!-- Style Test area -->
		<style>
<!-- 			@font-face {
			  font-family: 'glyphicons-halflings-regular';
			  src: url('../fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype');
			  src: url('../fonts/glyphicons-halflings-regular.ttf')  format('truetype');
			} -->
		</style>
		
	</head>
	<!--Start of Body -->
	<body>
		<div class="container-fluid">
			<!-- Header -->
			<div>
				<!--<h1>Circadian Stimulus Web Calculator</h1> -->
				<!--Header navbar-->
				<nav class="navbar navbar-inverse">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="#">Lighting Research Center</a>	
					</div>
					<div class="collapse navbar-collapse" id="myNavbar">
						<ul class="nav navbar-nav navbar-right">
							<li><a href="#">Resources</a></li>
							<li><a href="#">Background</a></li>
							<li><a href="#">About</a></li>
							<li><a href="#">Contact</a></li>
						</ul>
					</div>
				</nav>
			</div>
			<!-- Start of Column sections -->
			<div class="row">
				<!-- Selected Sources Column -->
				<div class="col-sm-3">
					<div class="text-center">
						<h4>Selected Sources</h4>
					</div>
					<table class="table table-hover">
						<thead>
							<tr>
								<th>Source</th>
								<th>Illuminance (lx)</th>
								<th>Remove Source</th>
							</tr>
						</thead>
						<tbody id="selected-sources">
						</tbody>
					</table>
				</div>
				<!-- Middle Section -->
				<div class="col-sm-6" style="border-left: 1px solid black; border-right: 1px solid black">
					<div class="row">
						<div class="text-center">
							<h4>Spectral Power Distribution</h4>
						</div>
						<canvas id="spdPlot">
						
						</canvas>
					</div>
					<div class="row">
						<div class="text-center">
							<h4>Select From Preloaded Sources Below</h4>
						</div>
						<form class="form-inline" style="padding: 1em 1em 1em 1em" onsubmit="return false">
							<div class="form-group">
								<div class="input-group">
									<span class="input-group-addon"><b>Manufacturer:</b></span>
									<select class="form-control sortSource" id="manufacterer">
										<option value="defaultValue" >Any</option>
									</select>									
								</div>
							</div>
							<div class="form-group">
								<div class="input-group">
									<span class="input-group-addon"><b>CCT:</b></span>
									<select class="form-control sortSource" id="cct">
										<option value="defaultValue" >Any</option>
									</select>									
								</div>
							</div>
							<div class="form-group">
								<div class="input-group">
									<span class="input-group-addon"><b>Lamp:</b></span>
									<select class="form-control sortSource" id="lamp">
										<option value="defaultValue" >Any</option>
									</select>									
								</div>
							</div>
							<div class="form-group has-feedback">
								<div class="input-group">
									<span class="input-group-addon"><b>Search:</b></span>
									<input type="text" class="form-control sortSource" id="searchSource" placeholder="Search Sources" onfocus="this.select();" onmouseup="return false;">							
								</div>
							</div>
							<div class="form-group">
								<div class="input-group">
									<input id="reset" type="button" class="btn btn-info" value="Reset Filters">									
								</div>
							</div>
							<div class="form-group">
								<div class="input-group">
									<input id="addUserSource" type="button" class="btn btn-info" value="Add Custom Source" data-toggle='modal' data-target='#myModal'>									
								</div>
							</div>
						</form>
					</div>
					<div class="row">
						<div id="names-list" class="list-group">
						</div>
						<div id="user-modal-area">
							<!-- Enter custom user SPD -->
							<div class="modal fade" id="myModal" role="dialog">
								<div class="modal-dialog">
									<!-- Modal content-->
									<div class="modal-content">
										<!-- Header -->
										<div class="modal-header">
										  <button type="button" class="close" data-dismiss="modal">&times;</button>
										  <h4 class="modal-title">Custom Source</h4>
										</div>
										<!-- Body -->
										<div class="modal-body">
											<form class="form-horizontal">
												<!-- Input Source Name -->
												<div id="userIDFormGroup" class="form-group has-feedback">
													<label class="control-label col-sm-4" for="userID">Source Name:</label>
													<div class="col-sm-8">
														<input type="text" class="form-control userEnter" id="userID" placeholder="Enter Unique Source ID" onfocus="this.select();" onmouseup="return false;">
														<span id="userIDSpan" class="glyphicon glyphicon-pencil form-control-feedback"></span>
													</div>
												</div>
												<!-- Input Manufacturer -->
												<div class="form-group has-feedback">
													<label class="control-label col-sm-4" for="userMan">Manufacturer:</label>
													<div class="col-sm-8"> 
														<input type="text" class="form-control userSortSource userEnter" id="userMan" value="Other" onfocus="this.select();" onmouseup="return false;">
													</div>
												</div>
												<!-- Input CCT -->
												<div class="form-group  has-feedback">
													<label class="control-label col-sm-4" for="userCCT">CCT:</label>
													<div class="col-sm-8"> 
														<input type="text" class="form-control userSortSource userEnter" id="userCCT" value="Other" onfocus="this.select();" onmouseup="return false;">
													</div>
												</div>
												<!-- Input Lamp Type -->
												<div class="form-group has-feedback">
													<label class="control-label col-sm-4" for="userLamp">Lamp Type:</label>
													<div class="col-sm-8"> 
														<input type="text" class="form-control userSortSource userEnter" id="userLamp" value="Other" onfocus="this.select();" onmouseup="return false;">
													</div>
												</div>
												<!-- Input User SPD -->
												<div id="userSPDFormGroup" class="form-group has-feedback">
													<label class="control-label col-sm-4" for="userSPD">Spectral Power Distribution (SPD):</label>
													<div class="col-sm-8"> 
														<textarea class="form-control" rows="5" id="userSPD" onfocus="this.select();" onmouseup="return false;"></textarea>
														<span id="userSPDSpan" class="glyphicon glyphicon-pencil form-control-feedback"></span>
													</div>
												</div>
											</form>
										</div>
										<!-- Footer -->
										<div class="modal-footer">
										  <button type="button" class="btn btn-default disabled" id="userSourceSubmit" onclick=submitUserSource()>Submit</button>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div id="modal-area">
						</div>
					</div>
				</div>
				<!-- Results Column -->
				<div class="col-sm-3">
					<div class="text-center">
						<h4>Combined Source Value Metrics</h4>
					</div>
					<table class="table table-hover">
						<thead>
							<tr>
								<th>Measurement</td>
								<th>Value</td>
							</tr>
						</thead>
						<tbody>
							<!-- CS Tab -->
							<tr data-toggle="collapse" data-target="#cs_info" class="accordion-toggle" style="cursor: pointer;">
								<td>CS:</td>
								<td id="resultCS">0</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="cs_info">
										<p><b>Circadian Stimulus (CS)</b> is the calculated effectiveness
of the spectrally weighted irradiance at the cornea from threshold (CS = 0.1) to saturation (CS = 0.7),  assuming a fixed duration of exposure of 1 hour.</p>
									</div>
								</td>
							</tr>
							<!-- CLa Tab -->
							<tr data-toggle="collapse" data-target="#cla_info" class="accordion-toggle" style="cursor: pointer;">
								<td>CLa:</td>
								<td id="resultCLA">0</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="cla_info">
										<p><b>Circadian Light (CLA)</b> is the irradiance at the cornea weighted to reflect the spectral sensitivity of the human circadian
system as measured by acute melatonin suppression after a 1-hour exposure.</p>
									</div>
								</td>
							</tr>
							<!-- Illuminance Tab -->
							<tr data-toggle="collapse" data-target="#ill_info" class="accordion-toggle" style="cursor: pointer;">
								<td>Illuminance (lx):</td>
								<td id="resultIll">0</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="ill_info">
										<p><b>Illuminance (lx)</b> is the amount of light (luminous flux) incident on a surface area. Illuminance is measured in footcandles (lumens/square foot) or lux (lx, lumens/square meter). One footcandle equals 10.76 lx, although for convenience 10 lx commonly is used as the equivalent.</p>
									</div>
								</td>
							</tr>
							<!-- CCT Tab -->
							<tr data-toggle="collapse" data-target="#cct_info" class="accordion-toggle" style="cursor: pointer;">
								<td>CCT:</td>
								<td id="resultCCT">NaN</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="cct_info">
										<p><b>Correlated Color Temperature (CCT, Tcp)</b> is a specification for white light sources used to describe the dominant color tone along the dimension from warm (yellows and reds) to cool (blue). Lamps with a CCT rating below 3200 K are usually considered warm sources, whereas those with a CCT above 4000 K usually considered cool in appearance. Temperatures in between are considered neutral in appearance. Technically, CCT extends the practice of using temperature, in kelvins (K), for specifying the spectrum of light sources other than blackbody radiators. Incandescent lamps and daylight closely approximate the spectra of black body radiators at different temperatures and can be designated by the corresponding temperature of a blackbody radiator. The spectra of fluorescent and LED sources, however, differ substantially from black body radiators yet they can have a color appearance similar to a blackbody radiator of a particular temperature as given by CCT.</p>
									</div>
								</td>
							</tr>
							<!-- CRI Tab -->
							<tr data-toggle="collapse" data-target="#cri_info" class="accordion-toggle" style="cursor: pointer;">
								<td>CRI:</td>
								<td id="resultCRI">NaN</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="cri_info">
										<p><b>Color Rendering Index (CRI)</b> is a rating index commonly used to represent how well a light source renders the colors of objects that it illuminates. For a CRI value of 100, the maximum value, the colors of objects can be expected to be seen as they would appear under an incandescent or daylight spectrum of the same correlated color temperature (CCT). Sources with CRI values less than 50 are generally regarded as rendering colors poorly, that is, colors may appear unnatural.</p>
									</div>
								</td>
							</tr>
							<!-- GAI Tab -->
							<tr data-toggle="collapse" data-target="#gai_info" class="accordion-toggle" style="cursor: pointer;">
								<td>GAI:</td>
								<td id="resultGAI">NaN</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="gai_info">
										<p><b>Gamut Area Index (GAI)</b> is a measure of color rendering based upon volume in color space. It is the range of colors achievable on a given color reproduction medium (or present in an image on that medium) under a given set of viewing conditions.</p>
									</div>
								</td>
							</tr>
							<!-- Color Coordinates Tab -->
							<tr data-toggle="collapse" data-target="#xy_info" class="accordion-toggle" style="cursor: pointer;">
								<td>Color Coordinates (x,y):</td>
								<td id="resultXY">NaN, NaN</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="xy_info">
										<p>Information About Color Coordinates here.</p>
									</div>
								</td>
							</tr>
							<!-- Relative Combined SPD -->
							<tr data-toggle="collapse" data-target="#RelSPD_info" class="accordion-toggle" style="cursor: pointer;">
								<td>Relative Spectral Power Distribution:</td>
								<td>(SPD)</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="RelSPD_info">
										<table class="table">
											<thead>
												<tr>
													<th>Wavelength (nm)</th>
													<th>Value</th>
												</tr>
											</thead>
											<tbody id="RelSpdTable">
												
											</tbody>
										</table>
									</div>
								</td>
							</tr>
							<!-- Absolute Combined SPD -->
							<tr data-toggle="collapse" data-target="#AbsSPD_info" class="accordion-toggle" style="cursor: pointer;">
								<td>Absolute Spectral Power Distribution:</td>
								<td>(SPD)</td>
							</tr>
							<tr >
								<td colspan="6" class="hiddenRow" style="padding: 0">
									<div class="accordian-body collapse" id="AbsSPD_info">
										<table class="table">
											<thead>
												<tr>
													<th>Wavelength (nm)</th>
													<th>Spectral Irradiance (W&middotm<sup>-2</sup>&middotnm<sup>-1</sup>)</th>
												</tr>
											</thead>
											<tbody id="AbsSpdTable">
												
											</tbody>
										</table>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div class="footer">
			<!-- Load Chart Script here -->
			<script type="text/javascript" src="spdChart.js"></script>
			<div class="text-center">
				<p>2017 Rensselaer Polytechnical Institute, Troy, NY 12180 USA - All rights reserved</p>
			</div>
		</div>
	</body>
</html>