<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
    <title>CS Calculator</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <script src="https://unpkg.com/mathjs/lib/browser/math.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.3/Chart.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/GeneralFunctions.js"></script>
    <script src="js/lightMetricFunctions.js"></script>
    <script src="js/spectralEfficiency.js"></script>
    <script src="js/userFunctions.js"></script>
    <script src="js/jp.js"></script>
    <script src="js/ansi_duv.js"></script>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald:200,300,400,500,600,700&display=swap">
    <link rel="stylesheet" href="css/nav.css" />
  </head>
  <body class="h-100 mh-100">

    <div class="modal fade" id="helpModal">
      <div class="modal-dialog modal-xl">
        <div class="modal-content help-menu-content">
          <div class="container-fluid m-0 p-0">
            <div class="row h-100 mh-100">
              <div class="col-md-3">
                <ul class="help-menu-list">
                  <li data-value="sources" class="help-menu-list-item active"><h4 class="help-menu-list-title">Sources</h4></li>
                  <li data-value="variables" class="help-menu-list-item"><h4 class="help-menu-list-title">Variables</h4></li>
                  <li data-value="results" class="help-menu-list-item"><h4 class="help-menu-list-title">Results</h4></li>
                </ul>
              </div>
              <div class="col-md-9">
                <div class="help-section" id="help-sources">
                  <div class="modal-header">
                    <h4 class="modal-title">Source Selection</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body help-body">
                    <h3 class="help-menu-header">Sources</h3>
                    <p class="help-menu-p">
                      Click on a source to view additional information and have
                      the opportunity to add the source to the calculation area.
                      When the page is first loaded, all preloaded sources will
                      be listed. Use the filtering tools to only display sources
                      with the selected metrics.
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/2.png" class="w-55 my-4 rounded drop-shadow" ></figure>
                    <h3 class="help-menu-header">Filter</h3>
                    <p class="help-menu-p">
                      Select from the dropdown menus and use the keyword search bar
                      (optional) to access the sources that are currently
                      loaded in the calculator. Sources meeting the selected criteria
                      will appear under the Sources heading. Press the
                      Reset button to clear any filters.
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/1.png" class="w-55 my-4 rounded drop-shadow" ></figure>
                    <h3 class="help-menu-header">Custom Source</h3>
                    <p class="help-menu-p">
                      Fill in the required fields and click the Add to Sources List button
                      to see your custom source appear in the Sources list. Note that you will still
                      have to select your custom source from the Sources list to add
                      the source to the calculation area.
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/3.png" class="w-65 my-4 rounded drop-shadow" ></figure>
                  </div>
                </div>
                <div class="help-section d-none" id="help-variables">
                  <div class="modal-header">
                    <h4 class="modal-title">Variable Adjustments</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body help-body">
                    <h3 class="help-menu-header">Miscellaneous Input Variables</h3>
                    <p class="help-menu-p">
                      Miscellaneous input variables are listed by name and current setting. All variables default to average values. Click on each variable for additional information and click on the value to change it.
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/4.png" class="w-65 my-4 rounded drop-shadow" ></figure>
                    <h3 class="help-menu-header">Source Illuminances</h3>
                    <p class="help-menu-p">
                      Here you can enter the vertical illuminance value in lux for each of your selected sources
                      and remove any of your selected sources.
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/5.png" class="w-85 my-4 rounded drop-shadow" ></figure>
                    <h3 class="help-menu-header">Source Circadian Stimulus</h3>
                    <p class="help-menu-p">
                      When only one source has been added the option to calculate illuminance via circadian stimulus becomes available. Enter a CS value between 0.0 and 0.7 if you wish to calculate via CS.
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/9.png" class="w-85 my-4 rounded drop-shadow" ></figure>
                  </div>
                </div>
                <div class="help-section d-none" id="help-results">
                  <div class="modal-header">
                    <h4 class="modal-title">Results</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body help-body">
                    <h3 class="help-menu-header">Combined Source Value Metrics</h3>
                    <p class="help-menu-p">
                      This table shows the output measurements calculated for the
                      selected sources and their corresponding value. The output
                      measurements are shown on the left, and the values are shown
                      on the right.
                    </p>
                    <p class="help-menu-p">
                      <b>Circadian Stimulus (CS)</b> is the calculated effectiveness of the spectrally weighted irradiance at the cornea from threshold (CS = 0.1) to saturation (CS = 0.7), assuming a fixed duration of exposure of 1 hour.
                    </p>
                    <p class="help-menu-p">
                      <b>Circadian Light (CL<sub>A</sub>)</b> is the irradiance at the cornea weighted to reflect the spectral sensitivity of the human circadian system as measured by acute melatonin suppression after a 1-hour exposure.
                    </p>
                    <p class="help-menu-p">
                      <b>Illuminance (lx)</b> is the amount of light (luminous flux) incident on a surface area. Illuminance is measured in footcandles (lumens/square foot) or lux (lx, lumens/square meter). One footcandle equals 10.76 lx, although for convenience 10 lx commonly is used as the equivalent.
                    </p>
                    <p class="help-menu-p">
                      <b>Irradiance (W·m-2)</b> is the irradiance of a surface per unit frequency or wavelength, depending on whether the spectrum is taken as a function of frequency or of wavelength. The two forms have different dimensions: spectral irradiance of a frequency spectrum is measured in watts per square metre per hertz (W·m−2·Hz−1), while spectral irradiance of a wavelength spectrum is measured in watts per square metre per metre (W·m−3), or more commonly watts per square metre per nanometre (W·m−2·nm−1).
                    </p>
                    <p class="help-menu-p">
                      <b>Photon Flux (Photons·m-2·s-1)</b> is defined as the number of photons per second per unit area
                    </p>
                    <p class="help-menu-p">
                      <b>Correlated Color Temperature (CCT, Tcp)</b> is a specification for white light sources used to describe the dominant color tone along the dimension from warm (yellows and reds) to cool (blue). Lamps with a CCT rating below 3200 K are usually considered warm sources, whereas those with a CCT above 4000 K usually considered cool in appearance. Temperatures in between are considered neutral in appearance. Technically, CCT extends the practice of using temperature, in kelvins (K), for specifying the spectrum of light sources other than blackbody radiators. Incandescent lamps and daylight closely approximate the spectra of black body radiators at different temperatures and can be designated by the corresponding temperature of a blackbody radiator. The spectra of fluorescent and LED sources, however, differ substantially from black body radiators yet they can have a color appearance similar to a blackbody radiator of a particular temperature as given by CCT.
                    </p>
                    <p class="help-menu-p">
                      <b>D<sub>uv</sub></b> is a metric defined by American National Standard Institute (ANSI) that quantifies the distance between the chromaticity of a given light source and a blackbody radiator of equal CCT. A negative Duv indicates that the source is “below” the blackbody locus, having a purplish tint, whereas a positive Duv indicates that the source is “above” the blackbody locus, having a greenish tint.
                    </p>
                    <p class="help-menu-p">
                      <b>Color Rendering Index (CRI)</b> is a rating index commonly used to represent how well a light source renders the colors of objects that it illuminates. For a CRI value of 100, the maximum value, the colors of objects can be expected to be seen as they would appear under an incandescent or daylight spectrum of the same correlated color temperature (CCT). Sources with CRI values less than 50 are generally regarded as rendering colors poorly, that is, colors may appear unnatural.
                    </p>
                    <p class="help-menu-p">
                      <b>Gamut Area Index (GAI)</b> is a measure of color rendering based upon volume in color space. It is the range of colors achievable on a given color reproduction medium (or present in an image on that medium) under a given set of viewing conditions.
                    </p>
                    <p class="help-menu-p">
                      <b>Chromaticity:</b> The dominant or complementary wavelength and purity aspects of the color taken together, or of the aspects specified by the chromaticity coordinates of the color taken together. It describes the properties of light related to hue and saturation, but not luminance (brightness).
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/6.png" class="w-65 my-4 rounded drop-shadow" ></figure>
                    <p class="help-menu-p">
                      You can also select the View SPD Values button to view the
                      specific values for the relative and absolute spectral power
                      distributions.
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/7.png" class="w-55 my-4 rounded drop-shadow" ></figure>
                    <h3 class="help-menu-header">Output Plots</h3>
                    <p class="help-menu-p">
                      The output plots display information about the
                      combined attributes of light sources that have been selected.
                      Both the graphs and the associated legends will be modified
                      automatically as new sources are added and illuminance values
                      are adjusted. Click the buttons to toggle between the Spectral
                      Power Distribution, Chromaticity, and Color Rendering Metrics plots.
                    </p>
                    <figure class="w-95 text-center mobile-figure"><img src="img/help/8.png" class="w-85 my-4 rounded drop-shadow" ></figure>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="SPDModal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title"><span id="SPDModalTitleWord">Relative</span> Spectral Power Distribution</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="container-fluid">
              <div class="row mb-4">
                <div class="col text-center">
                  <button id="RelSpdBtn" type="button" class="spd-button btn btn-lrc w-30 mr-2 active">Relative</button>
                  <button id="AbsSpdBtn" type="button" class="spd-button btn btn-lrc w-30 ml-2">Absolute</button>
                </div>
              </div>
              <div id="SPDTableRow" class="row mb-4">
                <div class="col">
                  <table id="RelSpdTableContainer" class="spd-container table table-striped">
                    <thead class="thead-dark">
                      <tr>
                        <th class="w-50">Wavelength (nm)</th>
                        <th class="w-50">Value</th>
                      </tr>
                    </thead>
                    <tbody id="RelSpdTable"></tbody>
                  </table>
                  <table id="AbsSpdTableContainer" class="spd-container table table-striped d-none">
                    <thead class="thead-dark">
                      <tr>
                        <th class="w-50">Wavelength (nm)</th>
                        <th class="w-50">Value</th>
                      </tr>
                    </thead>
                    <tbody id="AbsSpdTable"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-lrc" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="mpod-modal" tabindex="-1" role="dialog" aria-labelledby="mpod-modal-label" aria-hidden="true">
      <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="mpod-modal-label">Macular Pigment Optical Density</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>The human retina is not a uniform neural tissue. The highest density of cone photoreceptors in the retina is in the foveal pit, which is used for such visual tasks a reading, threading needles, and identification of distant objects. The macula is a circular region of the retina that extends radially from the fovea with a much higher density of cones than the peripheral retina which is dominated by rods. Most of the visual cortex is devoted to processing images focused in the macula. Therefore, for human conscious perception, the macula is particularly important.</p>
            <p>Interlaced among the photoreceptors and the other retinal neurons in the macula is a yellow screening pigment, the macula lutea, that is believed to protect the retina from damage by short wavelengths. The spatial extent of this circular screening pigment is approximately 6-10<sup>o</sup> with the highest pigment density in the foveal region.  Since the macular pigment preferentially filters short wavelengths and since the most effective rays entering the eye are along the optical axis, the spectral sensitivity of the central retina will be influenced by the optical density of the macular pigment.</p>
            <p>Importantly, individuals differ quite substantially in the optical density of their macular pigment. The optical density of the macular pigment for different people can range from 0.3 to 0.7; the original model by Rea et al. (2005) assumes a single optical density of 0.5 for all individuals. A new feature of the CS calculator enables users to change macular pigment density for 0.3 to 0.7 in steps of 0.05 to determine how individuals might differ in their effective CS for a given spectral power distribution. </p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="time-modal" tabindex="-1" role="dialog" aria-labelledby="time-modal-label" aria-hidden="true">
      <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="time-modal-label">Duration of Exposure</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Some text here about Durastion of exposure</p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="scalar-modal" tabindex="-1" role="dialog" aria-labelledby="scalar-modal-label" aria-hidden="true">
      <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="scalar-modal-label">Distribution Scalar</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Some text here about distribution scalar</p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="attenuation-modal" tabindex="-1" role="dialog" aria-labelledby="attenuation-modal-label" aria-hidden="true">
      <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="attenuation-modal-label">Attenuation Percent</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Some text here about attenuation percent</p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="source-modal" tabindex="-1" role="dialog" aria-labelledby="sourece-modal-label" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="source-modal-label"></h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p class="m-0"><b>Lamp Type:</b><span class="pl-1" id="source-lamptype"></span></p>
            <p class="m-0"><b>CCT:</b><span class="pl-1" id="source-cct"></span></p>
            <p class="m-0"><b>Manufacturer:</b><span class="pl-1" id="source-manufacturer"></span></p>
            <p class="m-0"><b>Description:</b><span class="pl-1" id="source-info"></span></p>
            <p ><b>SPD:</b></p>
            <canvas class="p-4" id="source-spd"></canvas>
          </div>
          <div id="source-modal-footer" class="modal-footer">
            <button id="source-add" class="btn btn-lrc addSource" type="button" data-dismiss="modal">Add Source</button>
          </div>
        </div>
      </div>
    </div>

    <!-- <div id="source-modal" class="modal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg" role="">
        <div class="modal-header">
          <h5 class="m-0"></h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p><b>ID:</b><span id="source-id"></span></p>
          <p><b>Lamp Type:</b><span id="source-lamptype"></span></p>
          <p><b>CCT:</b><span id="source-cct"></span></p>
          <p><b>Manufacturer:</b><span id="source-manufacturer"></span></p>
          <p><b>Description:</b><span id="source-description"></span></p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-lrc addSource" type="button" data-dismiss="modal">Add Source</button>
        </div>
      </div>
    </div> -->

    <div id="content" class="container-fluid mt-4 px-5">
      <div class="row">
        <div class="col">
          <div class="card mb-3 drop-shadow">
            <!-- <div class="card-header">
              <div class="row">
                <div class="col-md-3">
                  <div id="pageChange1" class="page-title-container">
                    <h2 class="page-title mb-0">
                      Background
                    </h2>
                  </div>
                </div>
                <div class="col-md-3">
                  <div id="pageChange2" class="page-title-container active">
                    <h2 class="page-title mb-0">
                      Calculator
                    </h2>
                  </div>
                </div>
                <div class="col-md-3">
                  <div id="pageChange3" class="page-title-container">
                    <h2 class="page-title mb-0">
                      Tutorials
                    </h2>
                  </div>
                </div>
                <div class="col-md-3">
                  <div id="pageChange4" class="page-title-container">
                    <h2 class="page-title mb-0">
                      Resources
                    </h2>
                  </div>
                </div>
              </div>
            </div> -->
            <div class="card-header">
              <div class="row">
                <div class="col-md-6">
                  <div id="stepChange1" class="step-title-container active">
                    <h2 class="step-title mb-0 active">
                      Sources
                    </h2>
                  </div>
                </div>
                <div class="col-md-6">
                  <div id="stepChange2" class="step-title-container disabled">
                    <h2 class="step-title mb-0">
                      Results
                    </h2>
                  </div>
                </div>
              </div>
            </div>

            <!-- Background -->
            <div id="pageContent1">

            </div>

            <!-- Calculator -->
            <div id="pageContent2">

              <div id="stepContent1" class="card-body">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-xl-7">
                      <h5 class="w-100 text-center text-lrc">Existing Sources</h5>
                      <hr class="hr-lrc"/>
                      <div class="row mb-4">
                        <div class="col-md-5">
                          <h5 class="inner-section-title">filter</h5>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend mw-175 text-center">
                              <label class="input-group-text mw-175 text-center" for="manufacterer"><b>Manufacturer:</b></label>
                            </div>
                            <select class="custom-select sortSource" id="manufacterer">
                              <option selected>Any</option>
                            </select>
                          </div>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend mw-175">
                              <label class="input-group-text mw-175" for="cct"><b>CCT:</b></label>
                            </div>
                            <select class="custom-select sortSource" id="cct">
                              <option selected>Any</option>
                            </select>
                          </div>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend mw-175">
                              <label class="input-group-text mw-175" for="lamp"><b>Lamp:</b></label>
                            </div>
                            <select class="custom-select sortSource" id="lamp">
                              <option selected>Any</option>
                            </select>
                          </div>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend mw-175">
                              <span class="input-group-text mw-175" id="keyword"><b>Keyword:</b></span>
                            </div>
                            <input id="searchSource" type="text" class="form-control sortSource" aria-label="Default" aria-describedby="keyword" placeholder="Search">
                          </div>
                          <div class="form-group">
                            <div class="input-group">
                              <button class="w-100 btn btn-lrc text-center" id="reset" type="button">Reset</button>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-1">
                          <h5 class="inner-section-title">></h5>
                        </div>
                        <div class="col-md-6">
                          <h5 class="inner-section-title">sources</h5>
                          <ul id="names-list" class="list-group list-group-hover list-height">
                          </ul>
                        </div>
                      </div>

                    </div>
                    <div class="col-xl-1">
                      <div class="row">
                        <div class="col-md-12">
                          <h5 class="o-0 w-100 text-center text-lrc">or</h5>
                          <hr class="o-0 hr-lrc"/>
                          <div class="row">
                            <div class="col">
                              <h5 class="inner-section-title">or</h5>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-xl-4">
                      <h5 class="w-100 text-center text-lrc">Custom Source</h5>
                      <hr class="hr-lrc" />
                      <div class="row">
                        <div id="newSourceCol" class="col-md-12">
                          <h5 class="inner-section-title">create your own</h5>
                          <form>

                            <!-- Input Source Name -->
                            <div id="userIDFormGroup" class="input-group mb-3">
                              <div class="input-group-prepend mw-175">
                                <label class="input-group-text mw-175" for="userID"><b class="m-auto">Source Name:</b></label>
                              </div>
                              <input type="text" class="form-control userSortSource userEnter" id="userID" placeholder="Unique Source Name">
                            </div>

                            <!-- Input Manufacturer -->
                            <div class="input-group mb-3">
                              <div class="input-group-prepend mw-175">
                                <label class="input-group-text mw-175" for="userMan"><b class="m-auto">Manufacturer:</b></label>
                              </div>
                              <input type="text" class="form-control userSortSource userEnter" id="userMan" placeholder="(Optional)">
                            </div>

                            <!-- Input CCT -->
                            <div class="input-group mb-3">
                              <div class="input-group-prepend mw-175">
                                <label class="input-group-text mw-175" for="userCCT"><b class="m-auto">CCT (K):</b></label>
                              </div>
                              <input type="text" class="form-control userSortSource userEnter" id="userCCT" placeholder="(Optional)">
                            </div>

                            <!-- Input Lamp Type -->
                            <div class="input-group mb-3">
                              <div class="input-group-prepend mw-175">
                                <label class="input-group-text mw-175" for="userLamp"><b class="m-auto">Lamp Type:</b></label>
                              </div>
                              <input type="text" class="form-control userSortSource userEnter" id="userLamp" placeholder="(Optional)">
                            </div>

                            <!-- Input Desc -->
                            <div class="input-group mb-3">
                              <div class="input-group-prepend mw-175">
                                <label class="input-group-text mw-175" for="userDesc"><b class="m-auto">Description:</b></label>
                              </div>
                              <textarea rows="3" class="form-control userSortSource userEnter" id="userDesc" Placeholder="(Optional)"></textarea>
                            </div>

                            <div class="text-center mb-3">
                              <h5>Spectral Power Distribution (SPD):</h5>
                            </div>

                            <div class="row">
                              <div class="col-lg-6 col-md-12">

                                <!-- Input Wavelengths -->
                                <div id="userSPDFormWavelengths" class="input-group mb-3">
                                  <label class="input-group-text mw-175 w-100 top-label" for="userSPDWavelengths"><b class="m-auto">λ (nm):</b></label>
                                  <textarea class="form-control text-right w-100 bottom-input mw-175" rows="5" id="userSPDWavelengths" placeholder="380&#10;382&#10;384&#10;386&#10;388"></textarea>
                                </div>
                              </div>

                              <div class="col-lg-6 col-md-12">

                                <!-- Input Values -->
                                <div id="userSPDFormValues" class="input-group mb-3">
                                  <label class="input-group-text mw-175 w-100 top-label" for="userSPDValues"><b class="m-auto">Values</b></label>
                                  <textarea class="form-control text-right w-100 bottom-input mw-175" rows="5" id="userSPDValues" placeholder="0.0020065&#10;0.0016818&#10;0.001013&#10;0.00054935&#10;0.00027727"></textarea>
                                </div>

                              </div>
                            </div>
                              <button type="button" class="btn btn-lrc disabled w-100" id="userSourceSubmit" onclick=submitUserSource()>Add to Sources List</button>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div id="stepContent2" class="card-body d-none">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-md-6">
                      <!-- <h5 class="w-100 text-center text-lrc">Source Illuminances</h5>
                      <hr class="hr-lrc"/> -->
                      
                      <div class="row light-bg">
                        <div class="col">
                          <table class="table">
                            <thead class="thead">
                              <tr>
                                <th class="text-center w-40">Source</th>
                                <th class="text-center w-40">Vertical Illuminance (lx)</th>
                                <th class="text-center w-20">Remove</th>
                              </tr>
                            </thead>
                            <tbody id="selected-sources">
                            </tbody>
                          </table>
                        </div>
                      </div>
                          
                      <!-- <div class="row" id="csInputSection" style="display: none;">
                        <div class="col">
                          <h4 class="text-center"> - OR - </h4>
                          <h5 class="w-100 text-center text-lrc">Source Circadian Stimulus</h5>
                          <hr class="hr-lrc"/>
                        </div>
  
                        <div class="input-group mb-3">
                          <div class="input-group-prepend mw-175 text-center">
                            <label class="input-group-text mw-175 text-center" for="manufacterer"><b>CS:</b></label>
                          </div>
                          <input class="form-control ssCS" id="csInput" placeholder="0.0"/>
                        </div>
                      </div> -->

                      <div class="row">
                        <div class="col">
                          <!-- <h5 class="w-100 text-center text-lrc">Miscellaneous Input Variables</h5>
                          <hr class="hr-lrc"/> -->
                          <div class="row mb-4">
                            <div class="col">
      
                              <!-- <div class="input-group mb-3">
                                <div id="mpod-label-container" class="input-group-prepend mw-175 text-center">
                                  <label  class="input-group-text mw-175 text-center help-hover pointer" data-toggle="modal" data-target="#mpod-modal" for="mpod_sel"><b>Macular Pigment Optical Density:</b></label>
                                </div>
                                <select class="custom-select sortSource" id="mpod_sel">
                                  <option value='0.3'>0.3</option>
                                  <option value='0.35'>0.35</option>
                                  <option value='0.4'>0.4</option>
                                  <option value='0.45'>0.45</option>
                                  <option value='0.5' selected="selected">0.5 (default)</option>
                                  <option value='0.55'>0.55</option>
                                  <option value='0.6'>0.6</option>
                                  <option value='0.65'>0.65</option>
                                  <option value='0.7'>0.7</option>
                                </select>
                              </div> -->
                              <div class="input-group mb-3">
                                <div id="time-label-container" class="input-group-prepend mw-175 text-center">
                                  <label  class="input-group-text mw-175 text-center help-hover pointer" data-toggle="modal" data-target="#time-modal" for="time_sel"><b>Duration of Exposure (hrs):</b></label>
                                </div>
                                <select class="custom-select sortSource" id="time_sel">
                                  <option value='0.5'>0.5</option>
                                  <option value='0.75'>0.75</option>
                                  <option value='1.00' selected="selected">1 (default)</option>
                                  <option value='1.25'>1.25</option>
                                  <option value='1.50'>1.5</option>
                                  <option value='1.75'>1.75</option>
                                  <option value='2.00'>2</option>
                                  <option value='2.25'>2.25</option>
                                  <option value='2.50'>2.5</option>
                                  <option value='2.75'>2.75</option>
                                  <option value='3.00'>3</option>
                                </select>
                              </div>
                              <div class="input-group mb-3">
                                <div id="scalar-label-container" class="input-group-prepend mw-175 text-center">
                                  <label  class="input-group-text mw-175 text-center help-hover pointer" data-toggle="modal" data-target="#scalar-modal" for="scalar_sel"><b>Distribution Scalar:</b></label>
                                </div>
                                <select class="custom-select sortSource" id="scalar_sel">
                                  <option value='0.5'>0.5</option>
                                  <option value='0.6'>0.6</option>
                                  <option value='0.7'>0.7</option>
                                  <option value='0.8'>0.8</option>
                                  <option value='0.9'>0.9</option>
                                  <option value='1.0' selected="selected">1 (default)</option>
                                  <option value='1.1'>1.1</option>
                                  <option value='1.2'>1.2</option>
                                  <option value='1.3'>1.3</option>
                                  <option value='1.4'>1.4</option>
                                  <option value='1.5'>1.5</option>
                                  <option value='1.6'>1.6</option>
                                  <option value='1.7'>1.7</option>
                                  <option value='1.8'>1.8</option>
                                  <option value='1.9'>1.9</option>
                                  <option value='2.0'>2</option>
                                  <option value='2.1'>2.1</option>
                                  <option value='2.2'>2.2</option>
                                  <option value='2.3'>2.3</option>
                                  <option value='2.4'>2.4</option>
                                  <option value='2.5'>2.5</option>
                                </select>
                              </div>
                              <!-- <div class="input-group mb-3">
                                <div id="attenuation-label-container" class="input-group-prepend mw-175 text-center">
                                  <label  class="input-group-text mw-175 text-center help-hover pointer" data-toggle="modal" data-target="#attenuation-modal" for="attenuation_sel"><b>Percent Attenuation:</b></label>
                                </div>
                                <select class="custom-select sortSource" id="attenuation_sel">
                                  <option value='0.0' selected="selected">0.0 (default)</option>
                                  <option value='0.05'>0.05</option>
                                  <option value='0.1'>0.1</option>
                                  <option value='0.15'>0.15</option>
                                  <option value='0.2'>0.2</option>
                                  <option value='0.25'>0.25</option>
                                  <option value='0.3'>0.3</option>
                                  <option value='0.35'>0.35</option>
                                  <option value='0.4'>0.4</option>
                                  <option value='0.45'>0.45</option>
                                  <option value='0.5'>0.5</option>
                                  <option value='0.55'>0.55</option>
                                  <option value='0.6'>0.6</option>
                                  <option value='0.65'>0.65</option>
                                  <option value='0.7'>0.7</option>
                                  <option value='0.8'>0.8</option>
                                  <option value='0.85'>0.85</option>
                                  <option value='0.9'>0.9</option>
                                  <option value='0.95'>0.95</option>
                                  <option value='1'>1</option>
                                </select>
                              </div> -->
                            </div>
                          </div>
                        </div>
                      </div>
                    

                      <div class="row">
                        <div class="col">
                          <!-- <h5 class="w-100 text-center text-lrc">Combined Source Value Metrics</h5>
                          <hr class="hr-lrc"/> -->
                          <div class="row">
                            <div class="col">
                              <table class="table table-striped">
                                <thead class="thead-dark">
                                  <tr>
                                    <th>Measurement</th>
                                    <th>Value</th>
                                  </tr>
                                </thead>
                                <tbody id="csvmbody">
                                  <tr>
                                    <td>CS:</td>
                                    <td id="resultCS">0</td>
                                  </tr>
                                  <tr>
                                    <td>CL<sub>A</sub>:</td>
                                    <td id="resultCLA">0</td>
                                  </tr>
                                  <tr>
                                    <td>Illuminance (lx):</td>
                                    <td id="resultIll">0</td>
                                  </tr>
                                  <tr>
                                    <td>Irradiance (W&middot;m<sup>-2</sup>):</td>
                                    <td id="resultIrr">0</td>
                                  </tr>
                                  <tr>
                                    <td>Photon Flux (Photons&middot;m<sup>-2</sup>&middot;s<sup>-1</sup>):</td>
                                    <td id="resultPf">0</td>
                                  </tr>
                                  <tr>
                                    <td>Equivalent Melanopic Lux (EML):</td>
                                    <td id="resultEML">0</td>
                                  </tr>
                                  <tr>
                                    <td>CCT:</td>
                                    <td id="resultCCT">NaN</td>
                                  </tr>
                                  <tr>
                                    <td>D<sub>uv</sub>:</td>
                                    <td id="resultDuv">NaN</td>
                                  </tr>
                                  <tr>
                                    <td>CRI:</td>
                                    <td id="resultCRI">NaN</td>
                                  </tr>
                                  <tr>
                                    <td>GAI:</td>
                                    <td id="resultGAI">NaN</td>
                                  </tr>
                                  <tr>
                                    <td>Color Coordinates (x,y):</td>
                                    <td id="resultXY">NaN, NaN</td>
                                  </tr>
                                </tbody>
                              </table>
                              <button data-toggle="modal" data-target="#SPDModal" type="button" class="btn btn-lrc w-100">View Combined SPD Values</button>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                    </div>
                    <div class="col-xl-6">
                      <!-- <h5 class="w-100 text-center text-lrc">Output Plots</h5>
                      <hr class="hr-lrc"/> -->
                      <div class="row mb-4">
                        <div class="col text-center">
                          <button type="button" id="plotBtnSPD" class="plot-btn btn btn-lrc w-30 active">SPD</button>
                          <button type="button" id="plotBtnChromaticity" class="plot-btn btn btn-lrc w-30">Chromaticity</button>
                          <button type="button" id="plotBtnCRM" class="plot-btn btn btn-lrc w-30">Rendering</button>
                        </div>
                      </div>
                      <div class="row">
                        <div id="PlotAreaSPD" class="plot-area col d-block">
                          <h3 class="plot-title">Spectral Power Distribution</h3>
                          <canvas id="spdPlot"></canvas>
                          <div id="spdLegend"  class="chart-legend"></div>
                          <div class="plot-extra">
                            <small>* For the Specified Spectral Power Distribution [Spectrum, Amount]</small>
                            <p><a href="http://journals.sagepub.com/doi/abs/10.1177/1477153511430474" target="_blank">Information on the calculation of Circadian Light</a>, <a href="http://journals.sagepub.com/doi/pdf/10.1177/1477153512467607" target="_blank">Corrigendum</a></p>
                          </div>
                        </div>
  
                        <div id="PlotAreaChromaticity" class="plot-area col d-none">
                          <h3 class="plot-title">Chromaticity</h3>
                          <canvas id="chromaticityPlot"></canvas>
                          <div id="chromaticityLegend"  class="chart-legend"></div>
                        </div>
  
                        <div id="PlotAreaCRM" class="plot-area col d-none">
                          <h3 class="plot-title">Color Rendering Metrics</h3>
                          <canvas id="crmPlot"></canvas>
                          <div id="crmLegend"  class="chart-legend"></div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col text-center">
                          <button id="resultsDownload" class="btn btn-green">Download Results as JSON</button>
                          <a id="jsondownload" class="hidden"></a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <!-- Tutorials -->
            <div id="pageContent3">
              
            </div>

            <!-- Resources -->
            <div id="pageContent4">
              
            </div>

          </div>
        </div>
      </div>
    </div>
  </body>
</html>
